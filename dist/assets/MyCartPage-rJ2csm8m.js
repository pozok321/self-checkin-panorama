import{_ as q,L as x,a as g,S as h,c as n,b as w,d as t,t as _,w as u,v,e as y,f as k,F as b,r as C,g as f,h as T,o as a,p as S,i as L}from"./index-VhF6knkF.js";import{_ as I}from"./cart-CZifxu0H.js";const O="/assets/ticket-icon-xWvWUuEa.png",M={data(){return{form_getCart:{events_id:this.$route.params.Eventsid,ticketid:JSON.parse(localStorage.getItem("mt_id")),ticket_qty:localStorage.getItem("ticket_qty"),ip_address:localStorage.getItem("ip_address"),prev_action:"ticketlist"},form_getDeclare:{events_id:this.$route.params.Eventsid},form_getticketSession:{events_id:this.$route.params.Eventsid,ticket_id:""},url:"",cart_detail:[],main_ticket:[],addon_ticket:[],ticket_ao:[],ticket_details:[],ticket_session:[],event_declaration:[],poster_mobile:"",enable_button:!0,subtotal:"",total:"",onhold_msg:"",class_name:"",route_name:this.$route.name,declare_checkbox:!1,LoadingButton:!1,isLoading:!1,global_url:this.$globalURL,event_detail:JSON.parse(localStorage.getItem("event_details")),titlePage:"Terms & Condition",descPage:"By buying this ticket, you agree to comply with following terms & conditions."}},components:{Loading:x},methods:{createCookie(s,e,r){if(r){let i=new Date;i.setTime(i.getTime()+r*24*60*60*1e3);var d="expires="+i.toGMTString()}else var d="";document.cookie=s+"="+e+";"+d+"; path=/"},getCookie(s){for(var e=s+"=",r=document.cookie.split(";"),d=0;d<r.length;d++){for(var i=r[d];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)==0)return i.substring(e.length,i.length)}return null},getCart(){this.isLoadingHeader=!0,this.isLoading=!0,g({url:"/rsvp/getcart",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_getCart}).then(s=>{if(this.isLoading=!1,this.isLoadingHeader=!1,s.data.status==201)h.fire({title:"Warning",html:s.data.msg,icon:"warning"}),this.$router.push("/ticketlist/"+this.form_getCart.events_id);else{this.cart_detail=s.data,this.main_ticket=this.cart_detail.main_ticket,this.addon_ticket=this.cart_detail.addon_ticket,this.total=this.cart_detail.total_price,this.class_name=this.main_ticket.ticket_name;for(let e=0;e<this.addon_ticket.length;e++)this.ticket_ao[this.addon_ticket[e].ticket_id]=this.addon_ticket[e].selected;this.setTitle("My Cart - "+this.event_detail.event_title+" - Undangin"),this.event_detail.rsvp_counter!=="O"&&this.$router.push("/closed/"+this.form_getCart.events_id),this.event_detail.setting.tnc_toggle=="Y"&&this.getDeclare()}})},reset_qty(){this.createCookie("qty","1",2)},getDeclare(){this.topFunction(),g({method:"POST",url:"/rsvp/declareget",headers:{"Content-Type":"text/plain"},data:this.form_getDeclare}).then(s=>{this.event_declaration=s.data,this.setTitle("Declare - Undangin"),this.js(),this.js_showchecked()})},topFunction(){window.scrollTo({top:0,behavior:"smooth"})},js(){var s=document.getElementById("myBtn");window.onscroll=function(){e()};function e(){document.body.scrollTop>20||document.documentElement.scrollTop>20?s.style.display="block":s.style.display="none"}},js_showchecked(){setTimeout(function(){(function(d){d.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()}})(jQuery);var s=$("#stylebar").hasScrollBar(),e=document.getElementById("stylebar");s==!0?jQuery(e).scroll(function(d){r(e)&&jQuery("#declare_checkbox").prop("disabled",!1)}):jQuery("#declare_checkbox").prop("disabled",!1);function r(d){var i=$(d);return d.scrollHeight-i.scrollTop()-i.outerHeight()<1e3}},200)},setTitle(s){document.title=`${s}`},next_page(){this.LoadingButton=!0,localStorage.setItem("ticket_qty",JSON.stringify(this.form_getCart.ticket_qty)),localStorage.setItem("total_price",JSON.stringify(this.total)),this.$router.push("/registrationpage/"+this.form_getCart.events_id)},plus_qty(s,e){if(this.form_getCart.ticket_qty=parseInt(e)+1,this.form_getCart.ticket_qty>this.event_detail.setting.maxticket_per_guest){this.form_getCart.ticket_qty=this.event_detail.setting.maxticket_per_guest;var r="Max allowed limit is "+this.event_detail.setting.maxticket_per_guest+" tickets / <br> Maks pembelian adalah "+this.event_detail.setting.maxticket_per_guest+" tiket";h.fire({title:"Warning",icon:"warning",html:r}).then(d=>{})}this.check_on_hold()},min_qty(s,e){e>0&&(this.form_getCart.ticket_qty=e-1,this.check_on_hold()),this.form_getCart.ticket_qty<1&&(this.form_getCart.ticket_qty=1)},add_qty(s,e){if(this.form_getCart.ticket_qty<1&&(this.form_getCart.ticket_qty=1),e>this.event_detail.setting.maxticket_per_guest){this.form_getCart.ticket_qty=this.event_detail.setting.maxticket_per_guest;var r="Max allowed limit is "+this.event_detail.setting.maxticket_per_guest+" tickets / <br> Maks pembelian adalah "+this.event_detail.setting.maxticket_per_guest+" tiket";h.fire({title:"Warning",icon:"warning",html:r}).then(d=>{})}this.check_on_hold()},check_on_hold(){this.isLoading=!0,this.form_getCart.ticketid=[],this.form_getCart.ticketid.push(this.main_ticket.ticket_id);for(let s=0;s<this.addon_ticket.length;s++)this.ticket_ao[this.addon_ticket[s].ticket_id]==!0&&this.form_getCart.ticketid.push(this.addon_ticket[s].ticket_id);g({url:"/rsvp/checkonhold",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_getCart}).then(s=>{this.isLoading=!1,this.form_getCart.ticket_qty<1?(this.enable_button=!1,this.onhold_msg="Oops! Minimum is 1 ticket",this.form_getCart.ticket_qty=0,h.fire({title:"Warning",icon:"warning",html:this.onhold_msg}).then(e=>{})):(this.onhold_data=s.data,s.data.status==201?this.enable_button=!1:this.enable_button=!0,this.onhold_msg=s.data.msg,this.getCart())})},get_infoticket(s){this.isLoading=!0,this.form_getticketSession.ticket_id=s.ticket_id,g({url:"/rsvp/ticketsession",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_getticketSession}).then(e=>{this.isLoading=!1,this.ticket_details=e.data,this.ticket_session=e.data.ticket_session})},calculate_price(){this.subtotal=0;for(let e=0;e<this.addon_ticket.length;e++)this.ticket_ao[this.addon_ticket[e].ticket_id]==!0&&(this.subtotal=this.subtotal+parseInt(this.addon_ticket[e].final_price));let s=0;this.main_ticket.coret==!0?s=parseInt(this.main_ticket.final_price):s=parseInt(this.main_ticket.normal_price),this.total=(this.subtotal+s)*this.form_getCart.ticket_qty},formatCurrency(s,e){if(e=="IDR"){if(s==0)return e=e+" "+s;var r=s?s.toString().replace(/[^,\d]/g,""):"",d=r.split(","),i=d[0].length%3,l=d[0].substr(0,i),p=d[0].substr(i).match(/\d{3}/gi),o="";return p&&(o=i?".":"",l+=o+p.join(".")),l=d[1]!=null?l+","+d[1]:l,e==null?l:l?e+" "+l:""}else return e+s?e+" "+s.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"):""},kFormatter(s,e){return e=="IDR"?Math.abs(s)>999?e+" "+Math.sign(s)*(Math.abs(s)/1e3).toFixed(1)+"K":e+" "+Math.sign(s)*Math.abs(s):e+value?e+" "+value.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"):""},update_mycart(){this.isLoadingHeader=!0,this.isLoading=!0,this.LoadingButton=!0,g({url:"/rsvp/getcart",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_getCart}).then(s=>{if(this.isLoading=!1,this.isLoadingHeader=!1,s.data.status==201)h.fire({title:"Warning",html:s.data.msg,icon:"warning"}),this.$router.push("/ticketlist/"+this.form_getCart.events_id);else{this.cart_detail=s.data,this.main_ticket=this.cart_detail.main_ticket,this.addon_ticket=this.cart_detail.addon_ticket,this.total=this.cart_detail.total_price;for(let e=0;e<this.addon_ticket.length;e++)this.ticket_ao[this.addon_ticket[e].ticket_id]=this.addon_ticket[e].selected;this.event_detail.rsvp_counter!=="O"&&this.$router.push("/closed/"+this.form_getCart.events_id),this.main_ticket.mark_soldout=="N"&&this.main_ticket.ticket_remain>0?(localStorage.setItem("mt_id",JSON.stringify(this.form_getCart.ticketid)),localStorage.setItem("ticket_qty",this.form_getCart.ticket_qty),localStorage.setItem("total",this.total),this.$router.push("/registrationpage/"+this.form_getCart.events_id)):this.main_ticket.mark_soldout=="N"&&this.main_ticket.ticket_remain<1?h.fire({title:"Warning",html:"On hold, please try in a few minutes ! / Tertahan, mohon dicoba beberapa menit lagi",icon:"warning"}):h.fire({title:"Warning",html:"Ticket sold out ! / Tiket sudah habis terjual",icon:"warning"})}})}},mounted(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},500),this.form_getDeclare.events_id=$cookies.get("events_id"),this.event_detail===null?this.$router.push("/"):(this.getCookie(),this.getCart())}},c=s=>(S("data-v-232fb556"),s=s(),L(),s),j={key:0,class:"vh-100 container-fluid"},P={class:"row"},D={class:"col-md-8 p-5 vh-100 bg-white"},B={class:"justify-content-between flex mb-3",name:"cart"},N=c(()=>t("div",{class:"my-cart mt-4"},[t("img",{src:I,alt:"cart"}),t("span",null,"My Cart")],-1)),U={class:"event-date"},V=c(()=>t("div",{class:"border-bottom mb-2"},null,-1)),E={class:"row"},F={class:"col-md-4"},H=["src"],W={class:"col-md-6 top-50 start-0 m-auto"},Q={class:"ticket-title"},Y={class:"text-start"},J=c(()=>t("div",{class:"border-bottom my-2"},null,-1)),R=c(()=>t("div",{class:"justify-content-between flex"},[t("p",null,"Ticket price"),t("p",null,"Quantity Ticket")],-1)),A={class:"justify-content-between flex"},G={key:0,class:"is-loading text-30"},K={key:1},z={key:0,class:"ticket-price-mt"},X={key:1,class:"coret-mt"},Z={class:"ticket-pricediscount-mt"},tt={class:"ticket-price-mt"},et={key:2,class:"quantity-item"},it={id:"myform",method:"POST",class:"quantity",action:"#"},st={key:3,class:"quantity-item"},ot={key:0,id:"myform",method:"POST",class:"quantity"},nt={key:1,id:"myform",method:"POST",class:"quantity"},at=c(()=>t("div",{class:"col-md-1"},null,-1)),lt={key:0,class:"row"},ct={class:"formRSVP"},dt=c(()=>t("h4",{class:"text-start my-3"},"Terms & Condition",-1)),_t=["innerHTML"],rt={class:"form-group"},ht={class:"form-check"},mt=c(()=>t("label",{class:"form-check-label",for:"declare_checkbox"}," Yes, I understand and agree to comply. ",-1)),ut={class:"col-md-4 bg-grey p-5 vh-100"},kt=c(()=>t("h2",{class:"mt-3 text-start"},"Your Order Details",-1)),gt=c(()=>t("div",{class:"border-bottom mt-3"},null,-1)),pt={class:"justify-content-between flex mt-3"},ft=c(()=>t("h4",null," Total Ticket ",-1)),vt={class:"ticket-number"},yt={key:0,class:"row mt-5"},bt=c(()=>t("p",{class:"text-start add-on-ticket"},"Add On Ticket (Optional)",-1)),Ct={class:"checkbox-wrap"},qt={class:"row"},xt={class:"col-md-8 col-8"},wt=["id","onUpdate:modelValue"],Tt=["id","onUpdate:modelValue"],St=["for"],Lt=c(()=>t("span",null,[t("svg",{width:"12px",height:"9px",viewbox:"0 0 12 9"},[t("polyline",{points:"1 5 4 8 11 1"})])],-1)),It=["onClick"],Ot=c(()=>t("i",{class:"bx bx-info-circle"},null,-1)),Mt={class:"col-md-4 col-6 padding-l-0 text-right"},jt={class:"ticket-name-mt"},Pt={key:0,class:"is-loading text-30"},Dt={key:1},Bt={key:0,class:"font-red"},Nt={class:"row mt-5"},Ut=c(()=>t("div",{class:"total-payment col-md-3"},[t("p",null,"Total Payment")],-1)),Vt={class:"price col-md-9 p-ticket text-end"},Et={class:"price"},Ft=c(()=>t("span",{class:"span-total-ticket text-end"},"please check ticket before add to purchase",-1)),Ht={class:"total-payment bottom-0 end-0"},Wt={class:"row"},Qt={class:"col-lg-12 col-sm-12 col-12"},Yt=["disabled"],Jt={key:0},Rt=c(()=>t("span",{class:"loader loading-quarter"},null,-1)),At={key:1},Gt={class:"modal fade",id:"showdetails_modal",role:"dialog"},Kt={class:"modal-dialog modal-top modal-top-50"},zt={class:"modal-content border-bottom-navy"},Xt={class:"modal-body"},Zt=c(()=>t("div",{class:"title-modal-custom"},[t("div",{class:"icon-modal"},[t("img",{src:O,width:"39",alt:"Ticket"})])],-1)),$t=c(()=>t("p",null,"Â ",-1)),te={key:0,class:"is-loading text-30"},ee={key:1,class:"text-center"},ie={key:2,class:"ppage text-center"},se={key:3},oe={class:"row marginbtm-5"},ne={class:"col-lg-4 col-md-4 col-sm-4 col-5 time-content"},ae={class:"col-lg-8 col-md-8 col-sm-8 col-7 desc-content"},le={class:"row"},ce={class:"col-lg-12 col-md-12 col-sm-12 col-12"},de={class:"session-topic"},_e={class:"session-brief"},re={class:"session-table"},he=c(()=>t("td",null,"Speaker",-1)),me=c(()=>t("td",null," : ",-1)),ue={class:"speaker-style"},ke={key:0},ge={key:4,class:"text-center"},pe=c(()=>t("br",null,null,-1)),fe=c(()=>t("div",{class:"btn-wrap text-center"},[t("a",{class:"btn btn-navy-cancel short-btn","data-bs-dismiss":"modal"}," Close ")],-1)),ve=c(()=>t("br",null,null,-1));function ye(s,e,r,d,i,l){const p=T("loading");return a(),n(b,null,[w(p,{active:i.isLoading,"onUpdate:active":e[0]||(e[0]=o=>i.isLoading=o),"can-cancel":!1,"is-full-page":s.fullPage},null,8,["active","is-full-page"]),i.event_detail?(a(),n("section",j,[t("div",P,[t("div",D,[t("div",B,[N,t("div",U,[t("p",null,_(this.event_detail.event_title),1),t("span",null,_(this.event_detail.event_date),1)])]),V,t("div",E,[t("div",F,[t("img",{src:i.global_url+this.event_detail.poster_mobile,alt:"cart",width:"100%",height:"100%"},null,8,H)]),t("div",W,[t("div",Q,[t("h4",Y,"Ticket : "+_(this.class_name),1)]),J,R,t("div",A,[i.isLoading?(a(),n("div",G)):(a(),n("div",K,[i.main_ticket.coret==!1?(a(),n("div",z,_(l.formatCurrency(i.main_ticket.normal_price,i.event_detail.currency)),1)):(a(),n("div",X,[t("div",Z,_(l.formatCurrency(i.main_ticket.normal_price,i.event_detail.currency)),1),t("div",tt,_(l.formatCurrency(i.main_ticket.final_price,i.event_detail.currency)),1)]))])),i.event_detail.pre_reg=="Y"?(a(),n("div",et,[t("form",it,[t("input",{type:"button",value:"-",class:"qtyminus minus",field:"quantity",onClick:e[1]||(e[1]=o=>l.min_qty(i.main_ticket,i.form_getCart.ticket_qty)),disabled:""}),u(t("input",{type:"number",name:"quantity",class:"qty","onUpdate:modelValue":e[2]||(e[2]=o=>i.form_getCart.ticket_qty=o),onChange:e[3]||(e[3]=o=>l.add_qty(i.main_ticket,i.form_getCart.ticket_qty)),disabled:""},null,544),[[v,i.form_getCart.ticket_qty]]),t("input",{type:"button",value:"+",class:"qtyplus plus",field:"quantity",onClick:e[4]||(e[4]=o=>l.plus_qty(i.main_ticket,i.form_getCart.ticket_qty)),disabled:""})])])):(a(),n("div",st,[i.main_ticket.mark_soldout=="N"&&i.main_ticket.ticket_remain>0?(a(),n("form",ot,[t("input",{type:"button",value:"-",class:"qtyminus minus",field:"quantity",onClick:e[5]||(e[5]=o=>l.min_qty(i.main_ticket,i.form_getCart.ticket_qty))}),u(t("input",{type:"number",name:"quantity",class:"qty","onUpdate:modelValue":e[6]||(e[6]=o=>i.form_getCart.ticket_qty=o),onChange:e[7]||(e[7]=o=>l.add_qty(i.main_ticket,i.form_getCart.ticket_qty))},null,544),[[v,i.form_getCart.ticket_qty]]),t("input",{type:"button",value:"+",class:"qtyplus plus",field:"quantity",onClick:e[8]||(e[8]=o=>l.plus_qty(i.main_ticket,i.form_getCart.ticket_qty))})])):(a(),n("form",nt,[t("input",{type:"button",value:"-",class:"qtyminus minus",field:"quantity",onClick:e[9]||(e[9]=o=>l.min_qty(i.main_ticket,i.form_getCart.ticket_qty)),disabled:""}),u(t("input",{type:"number",name:"quantity",class:"qty","onUpdate:modelValue":e[10]||(e[10]=o=>i.form_getCart.ticket_qty=o),disabled:"",onChange:e[11]||(e[11]=o=>l.add_qty(i.main_ticket,i.form_getCart.ticket_qty))},null,544),[[v,i.form_getCart.ticket_qty]]),t("input",{type:"button",value:"+",class:"qtyplus plus",field:"quantity",onClick:e[12]||(e[12]=o=>l.plus_qty(i.main_ticket,i.form_getCart.ticket_qty)),disabled:""})]))]))])]),at]),this.event_detail.setting.tnc_toggle=="Y"?(a(),n("div",lt,[t("div",ct,[dt,t("div",{id:"stylebar",class:"scrollbar",innerHTML:this.event_declaration.event_declaration},null,8,_t),t("div",rt,[t("div",ht,[u(t("input",{class:"form-check-input",type:"checkbox",id:"declare_checkbox","onUpdate:modelValue":e[13]||(e[13]=o=>i.declare_checkbox=o),name:"declare_checkbox",disabled:""},null,512),[[y,i.declare_checkbox]]),mt])])])])):k("",!0)]),t("div",ut,[kt,gt,t("div",pt,[ft,t("div",vt,_(this.form_getCart.ticket_qty),1)]),i.addon_ticket.length>0?(a(),n("div",yt,[bt,(a(!0),n(b,null,C(i.addon_ticket,o=>(a(),n("div",Ct,[t("div",qt,[t("div",xt,[t("div",null,[i.main_ticket.mark_soldout=="N"&&i.main_ticket.ticket_remain>0?u((a(),n("input",{key:0,class:"inp-cbx",id:"ticket_"+o.ticket_id,onChange:e[14]||(e[14]=m=>l.add_qty(i.main_ticket,s.ticket_qty)),"onUpdate:modelValue":m=>i.ticket_ao[o.ticket_id]=m,type:"checkbox"},null,40,wt)),[[y,i.ticket_ao[o.ticket_id]]]):u((a(),n("input",{key:1,class:"inp-cbx",id:"ticket_"+o.ticket_id,onChange:e[15]||(e[15]=m=>l.add_qty(i.main_ticket,s.ticket_qty)),"onUpdate:modelValue":m=>i.ticket_ao[o.ticket_id]=m,type:"checkbox",disabled:""},null,40,Tt)),[[y,i.ticket_ao[o.ticket_id]]]),t("label",{class:"cbx",for:"ticket_"+o.ticket_id},[Lt,t("span",null,_(o.ticket_name),1)],8,St),t("a",{class:"info-btn","data-bs-toggle":"modal","data-bs-target":"#showdetails_modal",onClick:m=>l.get_infoticket(o)},[Ot,f("Info Details ")],8,It)])]),t("div",Mt,[t("div",jt,[i.isLoading?(a(),n("div",Pt)):(a(),n("div",Dt,[f(" Ticket "+_(i.main_ticket.ticket_name)+" ",1),i.main_ticket.mark_soldout=="Y"?(a(),n("span",Bt,"( Sold Out )")):k("",!0)]))])])])]))),256))])):k("",!0),t("div",Nt,[Ut,t("div",Vt,[t("div",Et," IDR "+_(this.total),1),Ft]),t("div",Ht,[t("div",Wt,[t("div",Qt,[t("button",{class:"btn btn-purchase",disabled:i.declare_checkbox==!1,onClick:e[16]||(e[16]=o=>l.update_mycart())},[i.LoadingButton?(a(),n("span",Jt,[Rt,f(" Processing ")])):(a(),n("span",At," Purchase "))],8,Yt)])])])])])]),t("div",Gt,[t("div",Kt,[t("div",zt,[t("div",Xt,[Zt,$t,i.isLoading?(a(),n("div",te)):(a(),n("h4",ee)),i.ticket_details.status==200?(a(),n("p",ie,"Ticket for :")):k("",!0),i.ticket_details.status==200?(a(),n("div",se,[(a(!0),n(b,null,C(i.ticket_session,o=>(a(),n("div",oe,[t("div",ne,[t("b",null,_(o.start_time)+" - "+_(o.end_time),1)]),t("div",ae,[t("div",le,[t("div",ce,[t("div",de,_(o.session_topic),1),t("div",_e,_(o.session_brief),1),t("table",re,[t("tr",null,[he,me,t("td",null,[t("div",ue,[t("b",null,[f(_(o.speaker_name)+" ",1),o.speaker_jobtitle!==""?(a(),n("span",ke,"("+_(o.speaker_jobtitle)+")",1)):k("",!0)])])])])])])])])]))),256))])):(a(),n("div",ge,_(i.ticket_details.msg),1)),pe,fe,ve])])])])])):k("",!0)],64)}const qe=q(M,[["render",ye],["__scopeId","data-v-232fb556"]]);export{qe as default};
