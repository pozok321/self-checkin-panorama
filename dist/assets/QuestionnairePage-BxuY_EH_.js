import{_ as w,L as x,a as b,S as v,c as a,b as k,d as n,j as L,f as u,h as y,o as r,F as q,r as g,n as S,t as f,g as T,p as B,i as I}from"./index-VhF6knkF.js";import{F as N,a as O,E as C}from"./vee-validate.esm-BV3Gem88.js";const F={data(){return{event_detail:JSON.parse(localStorage.getItem("event_details")),form_getQuestion:{events_id:this.$route.params.Eventsid,order_id:localStorage.getItem("order_id"),prev_action:"addguest"},form_sendAnswer:{events_id:this.$route.params.Eventsid,guests_id:"",order_id:localStorage.getItem("order_id"),cbAnswer_id:[],ip_address:localStorage.getItem("ip_address"),prev_action:"questget"},question_data:[],answer_checked:[],answer_isother:[],answer_other:[],notifArray:[],notifArrayOther:[],declare_checkbox:!1,global_url:this.$globalURL,isLoading:!1,LoadingButton:!1,isLoadingAnimation:!1,route_name:this.$route.name,titlePage:"Attendance Details",descPage:"Please fill in all fields",titleNotif:"Please select something",titleNotifOther:"this field is required"}},components:{Form:N,Field:O,ErrorMessage:C,Loading:x},methods:{backPage(){$("#btn_back").click(),this.$router.push("/registrationpage/"+this.form_getQuestion.events_id)},isRequired(t){return t?!0:"this field is required"},get_ipaddress(){var t=this;$.getJSON("https://jsonip.com/",function(e){t.ip_address=e.ip,localStorage.setItem("ip_address",t.ip_address)})},getQuestion(){this.topFunction(),this.isLoading=!0,b({url:"rsvp/questget",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_getQuestion}).then(t=>{if(this.question_data=t.data,t.data.status==="201")v.fire({title:"Warning",icon:"warning",text:t.data.msg}).then(e=>{localStorage.clear(),this.$router.push("/homeregistrationpage")});else{this.isLoading=!1,this.form_sendAnswer.guests_id=this.question_data.guests_id;for(let e=0;e<this.question_data.question.length;e++){this.notifArray[this.question_data.question[e].question_id]=!1;for(let d=0;d<this.question_data.question[e].answer.length;d++)this.notifArrayOther[this.question_data.question[e].question_id+this.question_data.question[e].answer[d].id]=!1,$("#qa_other_notif-"+this.question_data.question[e].question_id+this.question_data.question[e].answer[d].id).hide()}this.js()}})},action_changerb(t,e){this.answer_isother[t+e.id]=e.is_others;for(let d=0;d<this.question_data.question.length;d++)if(this.question_data.question[d].question_id==t)for(let l=0;l<this.question_data.question[d].answer.length;l++)this.question_data.question[d].answer[l].id==e.id?e.is_others=="Y"?($("#qa_other_wrap-"+t+e.id).show(),$("#qa_other-"+t+e.id).prop("disabled",!1)):($("#qa_other_wrap-"+t+e.id).hide(),$("#qa_other-"+t+e.id).prop("disabled",!0)):($("#qa_other_wrap-"+this.question_data.question[d].question_id+this.question_data.question[d].answer[l].id).hide(),$("#qa_other-"+this.question_data.question[d].question_id+this.question_data.question[d].answer[l].id).prop("disabled",!0))},action_change(t,e){this.answer_isother[t+e.id]=e.is_others,$("#qa-"+t+e.id).is(":checked")?(this.answer_checked[t+e.id]="Y",this.answer_isother[t+e.id]=="Y"?($("#qa_other_wrap-"+t+e.id).show(),$("#qa_other-"+t+e.id).prop("disabled",!1)):($("#qa_other_wrap-"+t+e.id).hide(),$("#qa_other-"+t+e.id).prop("disabled",!0))):(this.answer_checked[t+e.id]="N",$("#qa_other_wrap-"+t+e.id).hide(),$("#qa_other-"+t+e.id).prop("disabled",!0))},js(){var t=document.getElementById("myBtn");window.onscroll=function(){e()};function e(){document.body.scrollTop>20||document.documentElement.scrollTop>20?t.style.display="block":t.style.display="none"}},js_showchecked(){setTimeout(function(){(function(l){l.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()}})(jQuery);var t=$("#stylebar").hasScrollBar(),e=document.getElementById("stylebar");t==!0?jQuery(e).scroll(function(l){d(e)&&jQuery("#declare_checkbox").prop("disabled",!1)}):jQuery("#declare_checkbox").prop("disabled",!1);function d(l){var o=$(l);return l.scrollHeight-o.scrollTop()-o.outerHeight()<1}},1e3)},setTitle(t){document.title=`${t}`},submitQuestion(t){this.form_sendAnswer.cbAnswer_id=[];var e=0,d=0,l=0,o=this;for(let _=0;_<this.question_data.question.length;_++)if($("input[name=question-"+this.question_data.question[_].question_id+"]").is(":checked"))e=e+1,$("input[name=question-"+this.question_data.question[_].question_id+"]:checked").each(function(){var p=$(this).val().split(","),c=p[1],s=$("#qa_other-"+o.question_data.question[_].question_id+c).val();if(s!==void 0)if(d=d+1,s!==""){l=l+1,$("#qa_other-"+o.question_data.question[_].question_id+c).removeClass("redBox"),$("#qa_other_notif-"+o.question_data.question[_].question_id+c).hide(),o.notifArrayOther[o.question_data.question[_].question_id+c]=!1;var i=$(this).val()+","+s;o.form_sendAnswer.cbAnswer_id.push(i)}else $("#qa_other-"+o.question_data.question[_].question_id+c).addClass("redBox"),$("#qa_other_notif-"+o.question_data.question[_].question_id+c).show(),o.notifArrayOther[o.question_data.question[_].question_id+c]=!0,o.topFunction();else o.form_sendAnswer.cbAnswer_id.push($(this).val())}),this.notifArray[this.question_data.question[_].question_id]=!1;else return this.notifArray[this.question_data.question[_].question_id]=!0,this.topFunction(),!1;this.question_data.question.length==e&&d==l&&this.actionSubmitQuestionare()},actionSubmitQuestionare(){this.isLoadingAnimation=!0,b({url:"rsvp/savequest",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_sendAnswer}).then(t=>{t.data.status==200?(localStorage.setItem("guests_id",t.data.guests_id),this.$router.push("/checkoutpage/"+this.form_getQuestion.events_id)):(this.isLoadingAnimation=!1,v.fire({title:"Warning",icon:"warning",text:t.data.msg}).then(e=>{}))})},topFunction(){window.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},500),this.event_detail===null?this.$router.push("/"):(this.event_detail.rsvp_counter!="O"&&this.$router.push("/closed/"+this.form_getQuestion.events_id),this.getQuestion.order_id!=null?this.$router.push("/registrationpage/"+this.events_id):(this.event_detail.setting.rsvp_assesment=="N"&&this.$router.push("/checkoutpage/"+this.events_id),this.getQuestion(),this.setTitle("Questionaire - "+this.event_detail.event_title+" - Undangin ")))}},h=t=>(B("data-v-5baa6b0c"),t=t(),I(),t),P={class:"vh-100 bg-white"},j={class:"container p-5"},H=h(()=>n("div",{class:"text-center"},[n("h1",null,"Questionnaire"),n("span",null,"Tell us about you and your business")],-1)),M={key:0,class:"content-limit"},E={class:"wrap-content radius-floating-none bg-white"},Y={class:"formRSVP"},V={key:0,class:"is-loading text-30"},R={key:1},U={class:"title-sub"},D={key:2},J={class:"form-check form-check-block"},W={key:0,class:"is-loading text-30"},z={key:1},G=["for"],K=["id","value","onClick","name"],X=["innerHTML"],Z=["for"],A=["name","id","value","onClick"],Q=["innerHTML"],ee=["id"],te=["id","name"],se=h(()=>n("span",{class:"icon-form"},[n("i",{class:"bx bx-check-square"})],-1)),ie=["id"],oe={key:0,class:"notif-verror"},ne={key:3},ae={class:"form-check form-check-block"},re={key:0,class:"is-loading text-30"},de={key:1},_e=["for"],le=["id","value","onInput","name"],ce=["innerHTML"],he=["for"],ue=["id","value","name","onInput"],fe=["innerHTML"],pe=["id"],me=["id","name"],qe=h(()=>n("span",{class:"icon-form"},[n("i",{class:"bx bx-check-square"})],-1)),ge=["id"],be={key:0,class:"notif-verror"},ve={class:"form-group text-center"},ke=h(()=>n("span",null," Back ",-1)),ye=[ke],we={class:"btn btn-main mx-1",id:"btn_register"},xe={key:0},$e=h(()=>n("span",{class:"loader loading-quarter"},null,-1)),Le={key:1},Se=h(()=>n("i",{class:"bx bxs-chevron-up"},null,-1)),Te=[Se];function Be(t,e,d,l,o,_){const p=y("loading"),c=y("Form");return r(),a("section",P,[k(p,{active:o.isLoading,"onUpdate:active":e[0]||(e[0]=s=>o.isLoading=s),"can-cancel":!1,"is-full-page":t.fullPage},null,8,["active","is-full-page"]),n("div",j,[H,o.event_detail?(r(),a("div",M,[n("div",E,[n("div",Y,[k(c,{onSubmit:_.submitQuestion},{default:L(()=>[n("div",null,[(r(!0),a(q,null,g(o.question_data.question,s=>(r(),a("div",{class:S(["form-box",{redBox:o.notifArray[s.question_id]}])},[o.isLoading?(r(),a("div",V)):(r(),a("div",R,[n("h4",U,f(s.question),1)])),s.input_type=="RB"?(r(),a("div",D,[(r(!0),a(q,null,g(s.answer,i=>(r(),a("div",J,[o.isLoading?(r(),a("div",W)):(r(),a("div",z,[i.answer_feedback=="Y"?(r(),a("label",{key:0,class:"form-check-label",for:"qa-"+s.question_id+i.id},[n("input",{class:"form-check-input",type:"radio",id:"qa-"+s.question_id+i.id,value:s.question_id+","+i.id+","+i.quest_score+","+i.is_others,onClick:m=>_.action_changerb(s.question_id,i),name:"question-"+s.question_id,checked:""},null,8,K),n("span",{innerHTML:i.answer_content},null,8,X)],8,G)):(r(),a("label",{key:1,class:"form-check-label",for:"qa-"+s.question_id+i.id},[n("input",{class:"form-check-input",type:"radio",name:"question-"+s.question_id,id:"qa-"+s.question_id+i.id,value:s.question_id+","+i.id+","+i.quest_score+","+i.is_others,onClick:m=>_.action_changerb(s.question_id,i)},null,8,A),n("span",{innerHTML:i.answer_content},null,8,Q)],8,Z)),i.is_others=="Y"?(r(),a("div",{key:2,class:"form-group",id:"qa_other_wrap-"+s.question_id+i.id,style:{display:"none"}},[n("input",{type:"text",class:"form-control",id:"qa_other-"+s.question_id+i.id,name:"qa_other-"+s.question_id+i.id,placeholder:"Answer Others",disabled:""},null,8,te),se,n("div",{class:"notif-verror",id:"qa_other_notif-"+s.question_id+i.id,style:{display:"none"}},f(o.titleNotifOther),9,ie)],8,ee)):u("",!0)]))]))),256)),o.notifArray[s.question_id]?(r(),a("div",oe,f(o.titleNotif),1)):u("",!0)])):(r(),a("div",ne,[(r(!0),a(q,null,g(s.answer,i=>(r(),a("div",ae,[o.isLoading?(r(),a("div",re)):(r(),a("div",de,[i.answer_feedback=="Y"?(r(),a("label",{key:0,class:"form-check-label",for:"qa-"+s.question_id+i.id},[n("input",{class:"form-check-input",type:"checkbox",id:"qa-"+s.question_id+i.id,value:s.question_id+","+i.id+","+i.quest_score+","+i.is_others,onInput:m=>_.action_change(s.question_id,i),name:"question-"+s.question_id,checked:""},null,40,le),n("span",{innerHTML:i.answer_content},null,8,ce)],8,_e)):(r(),a("label",{key:1,class:"form-check-label",for:"qa-"+s.question_id+i.id},[n("input",{class:"form-check-input",type:"checkbox",id:"qa-"+s.question_id+i.id,value:s.question_id+","+i.id+","+i.quest_score+","+i.is_others,name:"question-"+s.question_id,onInput:m=>_.action_change(s.question_id,i)},null,40,ue),n("span",{innerHTML:i.answer_content},null,8,fe)],8,he)),i.is_others=="Y"?(r(),a("div",{key:2,class:"form-group",id:"qa_other_wrap-"+s.question_id+i.id,style:{display:"none"}},[n("input",{type:"text",class:"form-control",id:"qa_other-"+s.question_id+i.id,name:"qa_otherfield-"+s.question_id+i.id,placeholder:"Answer Others",disabled:""},null,8,me),qe,n("div",{class:"notif-verror",id:"qa_other_notif-"+s.question_id+i.id,style:{display:"none"}},f(o.titleNotifOther),9,ge)],8,pe)):u("",!0)]))]))),256)),o.notifArray[s.question_id]?(r(),a("div",be,f(o.titleNotif),1)):u("",!0)]))],2))),256))]),n("div",ve,[n("a",{class:"btn btn-back mx-1",onClick:e[1]||(e[1]=s=>_.backPage())},ye),n("button",we,[o.LoadingButton?(r(),a("span",xe,[$e,T(" Processing ")])):(r(),a("span",Le," Next "))])]),n("button",{onClick:e[2]||(e[2]=s=>_.topFunction()),id:"myBtn",title:"Go to top"},Te)]),_:1},8,["onSubmit"])])])])):u("",!0)])])}const Oe=w(F,[["render",Be],["__scopeId","data-v-5baa6b0c"]]);export{Oe as default};
