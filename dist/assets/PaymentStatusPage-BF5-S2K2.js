import{_ as u,L as _,a as m,S as l,c as p,b as h,d as e,l as g,h as v,o as f,p as y,i as b}from"./index-DUwgG6wX.js";import{_ as S}from"./icon-ceklis-q5mEXBQP.js";const w={data(){return{event_detail:JSON.parse(localStorage.getItem("event_details")),form_payment:{transaction_id:localStorage.getItem("transaction_id")},form_cancel:{transaction_id:localStorage.getItem("transaction_id")},events_id:this.$route.params.Eventsid,urlGateway:JSON.parse(localStorage.getItem("urlGateway")),poster_mobile:localStorage.getItem("poster_mobile"),qr_payment:localStorage.getItem("qr_payment"),order_id:localStorage.getItem("order_id"),evidenc:localStorage.getItem("evidenc"),LoadingButton:!1,isLoadingAnimation:!1,global_url:this.$globalURL,isLoading:!1,isLoadingHeader:!1,route_name:this.$route.name}},components:{Loading:_},methods:{getUrlGateway(){this.Countdown(this.urlGateway.expiry_time)},check_status(){this.isLoadingAnimation=!0,m({url:"/midtrans/checkpaystatus",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_payment}).then(t=>{t.data.status_code==200?(this.isLoadingAnimation=!1,l.fire({title:"Payment Success",icon:"success"}).then(()=>{this.testing=t.data.transaction_status,this.$router.push("/receiptpage/"+this.events_id+"-"+this.order_id)})):t.data.status_code==201?(this.isLoadingAnimation=!1,l.fire({title:"Pending Payment",icon:"warning"})):t.data.status_code==407&&(this.isLoadingAnimation=!1,l.fire({title:"Your Payment is Expired",icon:"warning",text:t.data.transaction_status}),this.$router.push("/eventdetailpage"))})},payment_cancel(){this.isLoadingAnimation=!0,m({url:"/midtrans/cancelpay",headers:{"Content-Type":"text/plain"},method:"POST",data:this.form_cancel}).then(t=>{var a=this;t.data.status_code==200&&l.fire({title:"Cancel Payment Success",icon:"success",text:t.data.status_message}).then(i=>{a.isLoadingAnimation=!0,a.$router.push("/eventdetailpage")})})},formatDate(t){return moment(t).format("dddd, DD MMMM YYYY")},formatTime(t){return t=t.substring(0,5)},Countdown(t){let a=moment(t).format("MMM DD, YYYY HH:mm:ss");function i(n){return document.getElementById(n)}function d(n){return n<10?"0"+n:""+n}let c=new Date(a),s=countdown(null,c);setInterval(function(){s=countdown(null,c),s.start>s.end?(i("minutes").innerHTML=d(0),i("seconds").innerHTML=d(0)):(i("minutes").innerHTML=d(s.minutes),i("seconds").innerHTML=d(s.seconds))},1e3)}},mounted(){if(this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},500),this.event_detail===null)this.$router.push("/eventdetailpage");else{var t=this;t.getUrlGateway()}}},o=t=>(y("data-v-c2e23d5c"),t=t(),b(),t),L={class:"vh-100"},x={class:"container"},I={class:"row"},T={class:"d-flex"},M=["src"],k=g('<div class="d-flex" data-v-c2e23d5c><div class="row m-auto" data-v-c2e23d5c><div class="wrap-countdown" data-v-c2e23d5c><div id="countdown" data-v-c2e23d5c><ul data-v-c2e23d5c><li data-v-c2e23d5c><span id="minutes" data-v-c2e23d5c></span>Minutes</li><li data-v-c2e23d5c><span id="seconds" data-v-c2e23d5c></span>Seconds</li></ul></div><div id="coundown-off" data-v-c2e23d5c><ul data-v-c2e23d5c><li data-v-c2e23d5c><span id="minutes" data-v-c2e23d5c>00</span>Minutes</li><li data-v-c2e23d5c><span id="seconds" data-v-c2e23d5c>00</span>Seconds</li></ul></div></div></div></div>',1),P={class:"payment-success col-md-9 m-auto mt-4"},Y={class:"row align-center"},A=o(()=>e("div",{class:"col-md-3"},[e("img",{src:S,alt:"icon-ceklis"})],-1)),C={class:"col-md-9"},$=o(()=>e("h1",{class:"text-start py-3"},"Waiting for Payment",-1)),N=o(()=>e("span",{class:"thank-you"},"Thank you for the purchasing, your ticket has been processed, please check your email immediately",-1)),D={class:"form-group"},H=o(()=>e("button",{"data-bs-toggle":"modal","data-bs-target":"#showdetails_modal",class:"btn-done mt-3 mx-1"}," CANCEL ",-1)),E={class:"modal fade",id:"showdetails_modal",role:"dialog"},B={class:"modal-dialog modal-top-100"},G={class:"modal-content border-bottom-navy"},U={class:"modal-body"},O=o(()=>e("p",{class:"page text-center"},"Are You Sure?",-1)),q={class:"btn-wrap text-center"},V=o(()=>e("a",{class:"btn btn-navy-cancel short-btn","data-bs-dismiss":"modal"}," No ",-1)),J=o(()=>e("br",null,null,-1));function R(t,a,i,d,c,s){const n=v("loading");return f(),p("section",L,[h(n,{active:c.isLoading,"onUpdate:active":a[0]||(a[0]=r=>c.isLoading=r),"can-cancel":!1,"is-full-page":t.fullPage},null,8,["active","is-full-page"]),e("div",x,[e("div",I,[e("div",T,[e("img",{src:this.qr_payment,alt:"banner",class:"poster-mobile-img m-auto"},null,8,M)])]),k,e("div",P,[e("div",Y,[A,e("div",C,[$,N,e("div",D,[H,e("button",{class:"btn-print mt-3",onClick:a[1]||(a[1]=r=>s.check_status())}," PAYMENT STATUS ")])])])]),e("div",E,[e("div",B,[e("div",G,[e("div",U,[O,e("div",q,[V,e("a",{class:"btn btn-navy-cancel short-btn","data-bs-dismiss":"modal",onClick:a[2]||(a[2]=r=>s.payment_cancel())}," Yes ")]),J])])])])])])}const z=u(w,[["render",R],["__scopeId","data-v-c2e23d5c"]]);export{z as default};
